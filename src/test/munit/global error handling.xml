<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:munit="http://www.mulesoft.org/schema/mule/munit" xmlns:munit-tools="http://www.mulesoft.org/schema/mule/munit-tools"
	xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xsi:schemaLocation="
		http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
		http://www.mulesoft.org/schema/mule/munit http://www.mulesoft.org/schema/mule/munit/current/mule-munit.xsd
		http://www.mulesoft.org/schema/mule/munit-tools  http://www.mulesoft.org/schema/mule/munit-tools/current/mule-munit-tools.xsd">
	<munit:config name="global error handling.xml" />
	<munit:test name="APIKIT:BAD_REQUEST" doc:id="6f3595c7-3d05-461f-a08f-ec9a9e18fbcf" expectedErrorType="APIKIT:BAD_REQUEST">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when" doc:id="9496f382-99ce-4d0a-823a-e7cf9aa5d1b7" processor="apikit:router">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="students-email-process-api-config" attributeName="config-ref" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:error typeId="APIKIT:BAD_REQUEST" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow Reference" doc:id="c5519b2c-6f35-4bd3-a7ba-9fec43f27746" name="students-email-process-api-main"/>
		</munit:execution>
	</munit:test>
	<munit:test name="APIKIT:METHOD_NOT_ALLOWED" doc:id="ac094036-9dd9-43c7-946c-2ee7a4773782" expectedErrorType="APIKIT:METHOD_NOT_ALLOWED">
		<munit:behavior>
			<munit-tools:mock-when doc:name="Mock when" doc:id="8e39b639-02a5-457d-8353-3956326869ea" processor="apikit:router">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute whereValue="students-email-process-api-config" attributeName="config-ref" />
				</munit-tools:with-attributes>
				<munit-tools:then-return>
					<munit-tools:error typeId="APIKIT:METHOD_NOT_ALLOWED" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution>
			<flow-ref doc:name="Flow Reference" doc:id="a4088ca8-55eb-447c-87e3-8087f2f0928f" name="students-email-process-api-main" />
		</munit:execution>
		<munit:validation>
			<munit-tools:assert-that doc:name="Assert that" doc:id="ba7e5f21-5ba5-4ce7-8e0e-b729ce443c2a" expression="#[payload]" is="#[MunitTools::notNullValue()]" />
		</munit:validation>
	</munit:test>
	<munit:test name="APIKIT:NOT_FOUND" doc:id="6e3a34bf-5a49-4f6f-a0f7-65b675440921" expectedErrorType="APIKIT:NOT_FOUND">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when" doc:id="08a39901-0898-441f-b239-64aec70af80c" processor="apikit:router">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="students-email-process-api-config" attributeName="config-ref" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:error typeId="APIKIT:NOT_FOUND" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow Reference" doc:id="f3192be3-79f4-433b-9e82-99f3b6effaa1" name="students-email-process-api-main"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-that doc:name="Assert that" doc:id="3d063442-bdd4-4a8c-bc66-5d8a6d0dbe8c" expression="#[payload]" is="#[MunitTools::notNullValue()]"/>
		</munit:validation>
	</munit:test>
	<munit:test name="APIKIT:UNSUPPORTED_MEDIA_TYPE" doc:id="0fb5b72b-5845-4800-9c3a-99282abc050e" expectedErrorType="APIKIT:UNSUPPORTED_MEDIA_TYPE">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when" doc:id="4af30e9d-9258-4760-b8df-febb01a27675" processor="apikit:router">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="students-email-process-api-config" attributeName="config-ref" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:error typeId="APIKIT:UNSUPPORTED_MEDIA_TYPE" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow Reference" doc:id="ed28979f-8687-477f-a916-606d4b9ce05d" name="students-email-process-api-main"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-that doc:name="Assert that" doc:id="9bf80e5e-b9e5-4d33-81d0-1c321e2f3011" expression="#[payload]" is="#[MunitTools::notNullValue()]"/>
		</munit:validation>
	</munit:test>
	<munit:test name="APIKIT:NOT_ACCEPTABLE" doc:id="bddaa5fc-5089-43d4-b9ae-41f604ede7c3" expectedErrorType="APIKIT:NOT_ACCEPTABLE">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when" doc:id="c2851881-cd6e-4c70-b413-1c76a485688c" processor="apikit:router">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="students-email-process-api-config" attributeName="config-ref" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:error typeId="APIKIT:NOT_ACCEPTABLE" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow Reference" doc:id="b5cde320-5aa1-4ad0-b644-9cfda0bfc703" name="students-email-process-api-main"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-that doc:name="Assert that" doc:id="8b422f41-08ff-4d29-8243-d453bd63da62" expression="#[payload]" is="#[MunitTools::notNullValue()]"/>
		</munit:validation>
	</munit:test>
	<munit:test name="APIKIT:NOT_IMPLEMENTED" doc:id="5a2ae23a-46e1-4c5d-9ea8-c1234c6af59d" expectedErrorType="APIKIT:NOT_IMPLEMENTED">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when" doc:id="80148b26-24fe-4050-aee1-211cddd2cdb4" processor="apikit:router">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="students-email-process-api-config" attributeName="config-ref" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:error typeId="APIKIT:NOT_IMPLEMENTED" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow Reference" doc:id="48a929fd-c92b-4ba2-a8a6-70562f368890" name="students-email-process-api-main"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-that doc:name="Assert that" doc:id="db6c4147-ab96-4277-bdb1-857a545bd70c" expression="#[payload]" is="#[MunitTools::notNullValue()]"/>
		</munit:validation>
	</munit:test>
	<munit:test name="APIKIT:ANY" doc:id="e400aeef-9464-4bdf-b5e9-54c751514899" expectedErrorType="APIKIT:ANY">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when" doc:id="ac8f28c5-4c84-40ce-8d1f-63001fcb871a" processor="apikit:router">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="students-email-process-api-config" attributeName="config-ref" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:error typeId="APIKIT:ANY" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow Reference" doc:id="3cc5c240-f0b7-4029-b2cc-0859c91b46cc" name="students-email-process-api-main"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-that doc:name="Assert that" doc:id="6ff5a10f-e35a-481b-8908-a7acb922d7bf" expression="#[[payload]]" is="#[MunitTools::notNullValue()]"/>
		</munit:validation>
	</munit:test>
	<munit:test name="HTTP:INTERNAL_SERVER_ERROR" doc:id="633ea4fe-4d1c-48e3-ad5a-fe4b7791d793" expectedErrorType="HTTP:INTERNAL_SERVER_ERROR">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when" doc:id="cdf1145f-84c5-40b4-8d92-6d2574cd8a6b" processor="apikit:router">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="students-email-process-api-config" attributeName="config-ref" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:error typeId="HTTP:INTERNAL_SERVER_ERROR" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow Reference" doc:id="1b729a1a-35e0-4b15-8c3a-bb93af9c6e7d" name="students-email-process-api-main"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-that doc:name="Assert that" doc:id="b4976af7-1b91-4476-b3da-41527274a3b9" expression="#[payload]" is="#[MunitTools::notNullValue()]"/>
		</munit:validation>
	</munit:test>
	<munit:test name="HTTP:FORBIDDEN" doc:id="ff29a9cc-e487-43bc-a662-6cea0530095c" expectedErrorType="HTTP:FORBIDDEN">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when" doc:id="487a6bee-cb38-4fa7-87b6-3c8cbfe2c4c4" processor="apikit:router">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="students-email-process-api-config" attributeName="config-ref" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:error typeId="HTTP:FORBIDDEN" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow Reference" doc:id="0dce167b-ed82-4f65-9176-077a9bcf9ccd" name="students-email-process-api-main"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-that doc:name="Assert that" doc:id="e6a0aa2d-760a-4a86-91be-5a7c51196da3" is="#[MunitTools::notNullValue()]" expression="#[payload]"/>
		</munit:validation>
	</munit:test>
	<munit:test name="HTTP:UNAUTHORIZED" doc:id="6dad9bc2-74ce-4c8c-8d18-39066587121a" expectedErrorType="HTTP:UNAUTHORIZED">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when" doc:id="db36f5dc-8a39-4363-82d1-34bb9e44d327" processor="apikit:router">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="students-email-process-api-config" attributeName="config-ref" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:error typeId="HTTP:UNAUTHORIZED" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow Reference" doc:id="ce844de3-7acc-40c0-8ea2-92d210f29530" name="students-email-process-api-main"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-that doc:name="Assert that" doc:id="c0fe51ef-7178-43e5-bb69-4143c2870f84" expression="#[payload]" is="#[MunitTools::notNullValue()]"/>
		</munit:validation>
	</munit:test>
	<munit:test name="CONNECTIVITY" doc:id="68df1291-2570-4914-a667-dc442c321f0f" expectedErrorType="CONNECTIVITY">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when" doc:id="f879652d-cca6-47df-bb52-36ced20782aa" processor="apikit:router">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="students-email-process-api-config" attributeName="config-ref" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:error typeId="CONNECTIVITY" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			</munit:behavior>
			<munit:execution >
			<flow-ref doc:name="Flow Reference" doc:id="67745822-2f38-441c-bfc2-e95c376e1005" name="students-email-process-api-main"/>
			</munit:execution>
			<munit:validation >
			<munit-tools:assert-that doc:name="Assert that" doc:id="d84f77b7-eaac-4eaf-bd00-a78cb1053516" expression="#[payload]" is="#[MunitTools::notNullValue()]"/>
			</munit:validation>
	</munit:test>


</mule>
